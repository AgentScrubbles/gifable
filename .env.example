# Database Configuration
# ====================
# Gifable supports SQLite (default) and PostgreSQL
# You must also update the provider in prisma/schema.prisma to match your choice

# SQLite (Default) - Relative paths are relative to ./prisma directory
DATABASE_URL="file:./dev.db"

# PostgreSQL - Connection string format
# Basic: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# With SSL: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
# With self-signed cert: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require&sslaccept=accept_invalid_certs
# Example for Digital Ocean:
# DATABASE_URL="postgresql://user:password@db-postgresql-nyc3-12345.ondigitalocean.com:25060/gifable?sslmode=require"

# The external URL where your app is hosted (used for generating shareable links)
# e.g. "https://gifs.example.com" or "http://localhost:3000"
# IMPORTANT: This is also used for Matrix federation as the server name in MXC URIs
# The hostname from this URL will be used as the Matrix server name (e.g., gifs.example.com)
# For Matrix federation to work, this must be your public domain name
APP_URL=

# S3 storage configuration. Supports any S3 compatible API.
S3_ENDPOINT= # e.g. "s3.amazonaws.com"
S3_BUCKET= # e.g. "my.bucket.me" - make sure this is already created
S3_STORAGE_BASE_URL= # e.g. "https://my.bucket.me" - the url that maps to your bucket
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION= # your s3 region - optional
S3_BASE_PATH= # e.g. "media" - is joined with S3_STORAGE_BASE_URL and filename and - optional
S3_DEFAULT_ACL=private # optional, set the ACL that should be set for each file uploaded.
S3_PORT=443 # optional
S3_USE_SSL=true # optional


# any random string for session secret
SESSION_SECRET=

DEBUG="app:*"

# Seed an admin user on server start.
# ADMIN_USERNAME=
# ADMIN_PASSWORD=

# Disable public user registration.
# DISABLE_SIGNUP=1

# Set maximum file size. Defaults to 10MB
# MAX_FILE_SIZE=20MB

# Matrix Federation
# =================
# Gifable supports Matrix federation, allowing Matrix clients (like Element, Gomuks, etc.)
# to use GIFs from your instance in a federated way using MXC URIs.
#
# How it works:
# 1. Your Gifable instance acts as a Matrix media server
# 2. Media is referenced using MXC URIs: mxc://<your-domain>/<media-id>
# 3. Matrix homeservers fetch media via the /_matrix/media/v3/download endpoint
# 4. Only PUBLIC media is accessible via Matrix federation
#
# Setup:
# - Ensure APP_URL is set to your public domain (e.g., https://gifs.example.com)
# - The hostname from APP_URL becomes your Matrix server name
# - Gifable automatically serves these endpoints:
#   * /.well-known/matrix/server (server discovery)
#   * /_matrix/media/v3/download/{serverName}/{mediaId} (media download)
#
# Usage in Matrix:
# - Use getMxcUri(mediaId) helper to generate MXC URIs for your media
# - Share these MXC URIs in Matrix clients
# - The same GIF used multiple times = single MXC URI (no duplicates!)
# - Homeservers cache the media and can purge it independently
#
# No additional configuration required - it works automatically!
